<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="egovframework.example.user.dao.UserDAO">

	<select id="getUserById" parameterType="string"
		resultType="egovframework.example.user.dto.UserVO">
		SELECT userId, password, nickname, otp_enabled AS
		otpEnabled,
		otp_secret AS otpSecret
		FROM users
		WHERE userId = #{userId}
	</select>

	<select id="getUserByUserId" parameterType="string"
		resultType="egovframework.example.user.dto.UserVO">
		SELECT userId, userId, password, nickname,
		otp_enabled AS
		otpEnabled, otp_secret AS otpSecret
		FROM users
		WHERE
		userId = #{userId}
	</select>

	<insert id="insertUser"
		parameterType="egovframework.example.user.dto.UserVO">
		INSERT INTO users (userId, password, nickname,
		otp_enabled,
		otp_secret)
		VALUES (#{userId}, #{password},
		#{email}, #{otpEnabled},
		#{otpSecret})
	</insert>

	<update id="updateUser"
		parameterType="egovframework.example.user.dto.UserVO">
		UPDATE users
		SET userId = #{userId}, password =
		#{password}, nickname = #{nickname},
		otp_enabled = #{otpEnabled}, otp_secret
		= #{otpSecret}
		WHERE user_id = #{userId}
	</update>

</mapper>
