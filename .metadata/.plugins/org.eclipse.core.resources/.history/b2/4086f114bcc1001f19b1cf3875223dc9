-- SAMPLE 테이블 생성
CREATE MEMORY TABLE SAMPLE (
    ID VARCHAR(16) NOT NULL PRIMARY KEY, -- SAMPLE ID
    NAME VARCHAR(50),                    -- 이름
    DESCRIPTION VARCHAR(100),            -- 설명
    USE_YN CHAR(1),                      -- 사용 여부 (Y/N)
    REG_USER VARCHAR(10)                 -- 등록자
);

-- COMMENTS 테이블 생성
CREATE MEMORY TABLE COMMENTS (
    COMMENT_ID BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT, -- 댓글 ID
    SAMPLE_ID VARCHAR(16) NOT NULL,                        -- SAMPLE의 ID
    COMMENT_TEXT VARCHAR(255) NOT NULL,                    -- 댓글 내용
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,        -- 댓글 생성 시간
    FOREIGN KEY (SAMPLE_ID) REFERENCES SAMPLE(ID)          -- 외래 키 설정
);

-- IDS 테이블 생성 (자동 증가 ID 관리)
CREATE MEMORY TABLE IDS (
    TABLE_NAME VARCHAR(16) NOT NULL PRIMARY KEY,           -- 테이블 이름
    NEXT_ID BIGINT NOT NULL                                -- 다음 ID 값
);

-- IDS 테이블 초기값 삽입
MERGE INTO IDS KEY(TABLE_NAME) VALUES ('SAMPLE', 1), ('COMMENTS', 1);

-- SAMPLE 데이터 삽입
INSERT INTO SAMPLE (ID, NAME, DESCRIPTION, USE_YN, REG_USER) 
VALUES 
    ('SAMPLE-00001', 'Runtime Environment', 'Foundation Layer', 'Y', 'admin'),
    ('SAMPLE-00002', 'Database Configuration', 'DB 설정 방법', 'Y', 'admin'),
    ('SAMPLE-00003', 'API Integration', 'API 통합 방법', 'Y', 'admin'),
    ('SAMPLE-00004', 'Security Setup', '보안 설정 방법', 'Y', 'admin'),
    ('SAMPLE-00005', 'Runtime Environment', 'Batch Layer', 'Y', 'eGov');

-- COMMENTS 데이터 삽입
INSERT INTO COMMENTS (SAMPLE_ID, COMMENT_TEXT) 
VALUES 
    ('SAMPLE-00001', '이 샘플은 실행 환경을 설정하는 데 사용됩니다.'),
    ('SAMPLE-00002', 'DB 설정을 쉽게 할 수 있는 방법이 궁금해요.'),
    ('SAMPLE-00003', 'API 통합을 위한 첫 단계가 무엇인가요?'),
    ('SAMPLE-00004', '보안 설정을 강화하려면 어떤 조치를 취해야 하나요?'),
    ('SAMPLE-00005', 'Batch 환경 설정에 대해 알고 싶어요.');

-- AUTO_INCREMENT 초기화
ALTER TABLE COMMENTS ALTER COLUMN COMMENT_ID RESTART WITH 1;
